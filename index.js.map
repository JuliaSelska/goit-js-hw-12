{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\n//GALLERY CARD TEMPLATE//\nexport const createGalleryCardTemplate = imgInfo => {\n  \n  return  `\n    <li class=\"gallery-card\">\n      <a class=\"gallery-link\"  href=\"${imgInfo.largeImageURL}\">\n        <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" /> \n        <ul class=\"text-info\">\n          <li class=\"image-info\">\n            <h4>Likes</h4>\n            <p>${imgInfo.likes}</p>\n          </li>\n          <li class=\"image-info\">\n            <h4>Views</h4>\n            <p>${imgInfo.views}</p>\n          </li>\n          <li class=\"image-info\">\n            <h4>Comments</h4>\n            <p>${imgInfo.comments}</p>\n          </li>\n          <li class=\"image-info\">\n            <h4>Downloads</h4>\n            <p>${imgInfo.downloads}</p>\n        </ul>\n        </a>\n    </li>\n  `;\n};\n","import axios from 'axios';\n\nexport const fetchPhotosByQuery = (searchedEl, currentPage) => {\n  const searchParams = new URLSearchParams({\n    q: searchedEl,\n    key: '48482195-738aed504c51f4c8c5e491b18',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: 15,\n  });\n\n  return axios.get(`https://pixabay.com/api/?${searchParams}`, searchParams);\n\n};\n","import { createGalleryCardTemplate } from './js/render-functions.js';\nimport { fetchPhotosByQuery } from './js/pixabay-api.js';\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst lightbox = new SimpleLightbox('.js-gallery a');\nconst loader = document.querySelector('.loader');\n\nlet page = 1;\nlet searchedEl = '';\nlet perPage = 15;\n\nloader.classList.add('hidden');\nloadMoreBtn.classList.add('is-hidden');\n\nconst onSearchFormSubmit = async event => {\n  try {\n  event.preventDefault();\n\n  const searchedQuery = event.currentTarget.elements.user_query.value.trim();\n\n  if (searchedQuery === '') {\n    iziToast.error({\n      title: '',\n      message: 'Please enter your request',\n      messageColor: '#fafafb',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n    });\n\n    return;\n    }\n\n    page = 1;\n\n    searchedEl = searchedQuery;\n\n    \n    loader.classList.remove('hidden');\n\n\n    const {data} = await fetchPhotosByQuery(searchedQuery);\n    if (data.total === 0) {\n         iziToast.error({\n          title: '',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          messageColor: '#fafafb',\n          position: 'topRight',\n          backgroundColor: '#ef4040',\n        });\n\n        galleryEl.innerHTML = '';\n\n        searchFormEl.reset();\n\n        return;\n      }\n      \n  if (data.totalHits > perPage) {\n      loadMoreBtn.classList.remove('is-hidden');\n      loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n    } else {\n      loadMoreBtn.classList.add('is-hidden');\n    }\n\n    \n    const galleryTemplate = data.hits.map(el => createGalleryCardTemplate(el)).join('');\n    galleryEl.innerHTML = galleryTemplate;\n    lightbox.refresh();\n  } \n  catch (err) {\n    console.log(err);\n  } \n  finally {\n    \n    loader.classList.add('hidden');\n  }\n};\n\nconst onLoadMoreBtnClick = async () => {\n  try {\n    page++;\n\n   \n    loader.classList.remove('hidden');\n\n    const { data } = await fetchPhotosByQuery(searchedEl, page);\n\n    const galleryTemplate = data.hits.map(el => createGalleryCardTemplate(el)).join('');\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n\n    lightbox.refresh(); \n\n    const imgBox = galleryEl.getBoundingClientRect();\n    let imgHeight = imgBox.height;\n\n    window.scrollBy({\n      top: imgHeight * 2,\n      behavior: 'smooth',\n    });\n\n  \n    if (page * perPage >= data.totalHits) {\n      loadMoreBtn.classList.add('is-hidden');\n      iziToast.show({\n        title: '',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        color: 'blue',\n      });\n\n      loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n    }\n  } \n  catch (err) {\n    console.log(err);\n  } \n  finally {\n    loader.classList.add('hidden');\n  }\n};\n\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);"],"names":["createGalleryCardTemplate","imgInfo","fetchPhotosByQuery","searchedEl","currentPage","searchParams","axios","searchFormEl","galleryEl","loadMoreBtn","lightbox","SimpleLightbox","loader","page","perPage","onSearchFormSubmit","event","searchedQuery","iziToast","data","onLoadMoreBtnClick","galleryTemplate","el","err","imgHeight"],"mappings":"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"}